<ion-view view-title="History"  cache-view="false">
  <ion-content>
    <label class="item item-input item-select">
      <div class="input-label">
        Select By
      </div>
      <select ng-model="selectBy" ng-change="updateSelectBy(selectBy)">
        <option ng-selected="selected">Date</option>
        <option>Mood</option>
      </select>
    </label>
    <form class="history_date_form" ng-show="show[0]">
      <div class="row">
        <label class="item item-input item-stacked-label col-50">
          <span  class="input-label">From</span>
          <input class="history_date_input" id="start" type="date" ng-model="startDate" ng-change="setNewStartDate(startDate)">
        </label>
        <label class="item item-input item-stacked-label col-50">
          <span class="input-label">To</span>
          <input class="history_date_input" id="end" type="date" ng-model="endDate" ng-change="setNewEndDate(endDate)">
        </label>
      </div>
    </form>
    <form class="history_mood_form" ng-show="show[1]">
      <label class="item item-input item-select">
        <div class="input-label">
          Select Mood
        </div>
        <select  ng-model="selectedMood" ng-change="setSelectedMood(selectedMood)">
          <option ng-repeat="mood in moods" ng-selected="mood == selectedMood">{{mood}}</option>
        </select>
      </label>
    </form>

    <div class="card" ng-repeat="log in logs" ng-show="show[2]">
      <div ng-class="appTheme" class="item item-divider">
        {{log.mood}}
      </div>
      <div class="item">
        <div class=" item row">
          <label class="col">
            Date
          </label>
          <label class="col history_card_date">
            {{log.datetime.toDateString()}}
          </label>
        </div>
          <div class="item row ">
          <label class="col">
            Intensity
          </label>
          <label class="col history_card_intensity">
            {{log.intensity}}
          </label>
        </div>
        <div class="item row ">
          <label class="col">
            Triggers
          </label>
          <label class="col history_card_triggers" ng-repeat="trigger in log.triggers">
            {{trigger}}
          </label>
        </div>
        <div class="item row ">
          <label class="col">
            Beliefs
          </label>
          <label class="col history_card_beliefs" ng-repeat="belief in log.beliefs">
            {{belief}}
          </label>
        </div>
        <div class="item row">
          <label class="col">
            Behaviors
          </label>
          <label class="col history_card_behaviors" ng-repeat="behavior in log.behaviors">
            {{behavior}}
          </label>
        </div>
      </div>
    </div>

    <div class="card" ng-repeat="log in logs" ng-show="show[3]">
      <div ng-class="appTheme" class="item item-divider">
        {{log.mood}}
      </div>
      <div class="item">
        <div class=" item row">
          <label class="col">
            Date
          </label>
          <label class="col history_card_date">
            {{log.datetime.toDateString()}}
          </label>
        </div>
          <div class="item row ">
          <label class="col">
            Intensity
          </label>
          <label class="col history_card_intensity">
            {{log.intensity}}
          </label>
        </div>
        <div class="item row ">
          <label class="col">
            Triggers
          </label>
          <label class="col history_card_triggers" ng-repeat="trigger in log.triggers">
            {{trigger}}
          </label>
        </div>
        <div class="item row ">
          <label class="col">
            Beliefs
          </label>
          <label class="col history_card_beliefs" ng-repeat="belief in log.beliefs">
            {{belief}}
          </label>
        </div>
        <div class="item row">
          <label class="col">
            Behaviors
          </label>
          <label class="col history_card_behaviors" ng-repeat="behavior in log.behaviors">
            {{behavior}}
          </label>
        </div>
      </div>
    </div>
  </ion-content>
</ion-view>
